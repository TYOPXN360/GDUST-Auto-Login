# 广东科技学院(南城校区)校园网自动认证登录脚本

## 简介
本脚本专为广东科技学院（南城校区）校园网设计，提供一键式认证登录功能，支持首次自动认证、网络断开后自动重连（防断联），并通过命令行参数快速控制运行模式。脚本会实时展示关键连接信息（账号、IP、MAC），操作简洁，适配校区网络环境。



## 功能特点
- **一键认证**：自动完成校园网认证全流程（含网卡信息获取、二次认证请求），无需手动填写信息
- **防断联保护**：网络断开后自动检测并重连，维持稳定连接（仅提示重连动作，无冗余次数显示）
- **参数化控制**：支持`-y`（自动开启防断联）和`-n`（自动关闭防断联），适配不同使用场景
- **信息透明**：认证成功后清晰显示账号、IP地址、MAC地址，方便确认连接状态
- **人性化退出**：所有退出场景需按任意键确认，避免错过错误提示或结果信息
- **校区适配**：针对南城校区校园网认证服务器优化，兼容性更强


## 运行环境
- 操作系统：Windows 10/11（支持PowerShell 5.1及以上版本）
- 依赖工具：系统自带`curl.exe`（通常位于`C:\Windows\System32\`，用于网络连通性检测）
- 网络要求：需启用校园网WLAN或以太网（非虚拟网卡），并能获取IPv4地址


## 使用步骤

### 1. 准备脚本
将脚本保存为 `广东科技学院(南城校区)校园网一键认证登录脚本.ps1`（可根据需要简化文件名，如`广科南城校园网认证.ps1`）


### 2. 运行方式

#### 方式1：交互式运行（默认）
双击脚本或在PowerShell中执行：
```powershell
.\广东科技学院(南城校区)校园网一键认证登录脚本.ps1
```
- 认证成功后，会提示“是否开启防断联进程”，输入 `Y` 开启自动重连，输入 `N` 退出


#### 方式2：自动开启防断联（-y参数）
直接开启防断联模式，无需手动确认：
```powershell
.\广东科技学院(南城校区)校园网一键认证登录脚本.ps1 -y
```


#### 方式3：自动关闭防断联（-n参数）
认证成功后直接退出，不开启防断联：
```powershell
.\广东科技学院(南城校区)校园网一键认证登录脚本.ps1 -n
```


## 参数说明
| 参数 | 作用 | 备注 |
|------|------|------|
| `-y` | 自动开启防断联（网络断开后自动重连） | 优先级高于交互式询问，适合长期使用 |
| `-n` | 自动关闭防断联（认证成功后直接退出） | 与`-y`互斥，不可同时使用 |


## 示例输出

### 首次认证成功
```
[首次认证-基础信息] 网卡：Intel(R) Wi-Fi 6... | IP：10.10.25.138 | MAC：A8-6B-AD-7C-2F-91
[首次认证-步骤1] 发送初始认证请求...
[首次认证-服务器提示] 广东科技学院 校园网认证成功
[首次认证-基础信息] 提取二次认证地址：http://172.18.100.100:8010/...
[首次认证-步骤2] 发送二次认证请求...
[首次认证-结果] 二次认证成功

==================================================
正在验证网络连通性（检测校园网出口）...
✅ 首次认证成功！网络已连通（HTTP状态码：200）
📌 认证信息：
   账号：202301001（你的校园网账号）
   IP地址：10.10.25.138（当前分配IP）
   MAC地址：A8-6B-AD-7C-2F-91（设备MAC）
==================================================
```


### 网络断开后重连成功
```
==================================================
❌ 网络断开！开始尝试重连...
==================================================
[重连-基础信息] 网卡：Intel(R) Wi-Fi 6... | IP：10.10.25.138 | MAC：A8-6B-AD-7C-2F-91
[重连-步骤1] 发送认证请求...
[重连-服务器提示] 校园网重连成功
[重连-结果] 登录成功

✅ 重连成功！网络已恢复
📌 当前连接信息：
   账号：202301001（你的校园网账号）
   IP地址：10.10.25.138（当前分配IP）
   MAC地址：A8-6B-AD-7C-2F-91（设备MAC）
==================================================
```


## 注意事项
1. **执行权限设置**：  
   若运行时提示“无法加载脚本，因为在此系统上禁止运行脚本”，需先开启PowerShell执行权限：  
   ```powershell
   Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```  
   （按提示输入 `Y` 确认，使用完毕可恢复默认权限：`Set-ExecutionPolicy Restricted -Scope CurrentUser`）

2. **账号密码配置**：  
   脚本中默认账号密码为示例，使用前需替换为自己的校园网账号（通常为学号）和密码。

3. **校区适配说明**：  
   脚本针对南城校区校园网认证服务器（`172.18.100.100` 等）优化，其他校区可能需要调整服务器地址。

4. **防断联退出方式**：  
   开启防断联后，若需退出脚本，先按 `Ctrl+C` 中断循环，再按任意键确认退出。

5. **参数冲突处理**：  
   `-y` 和 `-n` 不可同时使用，否则会提示“参数冲突”并退出。


## 常见问题
- **“未找到可用网卡”**：检查Wi-Fi/以太网是否开启，确保已连接校园网并获取IPv4地址。
- **认证失败提示“账号或密码错误”**：确认校园网账号密码正确（与登录学校官网/教务系统的账号可能不同）。
- **curl执行失败**：Windows 10及以上系统通常自带curl，若缺失可从官网下载并添加到系统环境变量。
- **重连频繁**：可能是校园网信号不稳定或账号被多设备登录，建议检查网络环境或账号状态。
